
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../2024-01-06/joy/">
      
      
        <link rel="next" href="../cq/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.36">
    
    
      
        <title>An Introduction to Cached Quotients Lookup Arguments - Harry's Notes</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.06209087.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/font.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#an-introduction-to-cached-quotients-lookup-arguments" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Harry&#39;s Notes" class="md-header__button md-logo" aria-label="Harry's Notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Harry's Notes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              An Introduction to Cached Quotients Lookup Arguments
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="pink" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Harry&#39;s Notes" class="md-nav__button md-logo" aria-label="Harry's Notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Harry's Notes
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    2023 12 05
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            2023 12 05
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2023-12-05/thoughts-about-community/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    如何做好社区？在伊斯坦布尔 Devconnect 期间的思考
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    2023 12 06
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            2023 12 06
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2023-12-06/publish-obsidian-notes-to-website/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    如何发布一个 Obsidian 的笔记网站
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    2023 12 07
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            2023 12 07
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2023-12-07/zkp-space-lookups/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Twitter space: Lookups
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    2023 12 09
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            2023 12 09
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2023-12-09/lookup-arguments-overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lookup Arguments Overview
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    2023 12 25
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            2023 12 25
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2023-12-25/ec/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    椭圆曲线(Elliptic Curve)的神奇性质
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    2024 01 06
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            2024 01 06
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2024-01-06/joy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    我的人生哲学: 快乐理论
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" checked>
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    2024 01 23
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            2024 01 23
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    An Introduction to Cached Quotients Lookup Arguments
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    An Introduction to Cached Quotients Lookup Arguments
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-problem-lookup-arguments-solve" class="md-nav__link">
    <span class="md-ellipsis">
      The Problem Lookup Arguments Solve
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-contribution-of-cq" class="md-nav__link">
    <span class="md-ellipsis">
      The Contribution of CQ
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logarithmic-derivatives" class="md-nav__link">
    <span class="md-ellipsis">
      Logarithmic Derivatives
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logarithmic-derivative-lookup-protocol" class="md-nav__link">
    <span class="md-ellipsis">
      Logarithmic Derivative Lookup Protocol
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#polynomial-construction-and-pairing-proving-a_i-and-b_i" class="md-nav__link">
    <span class="md-ellipsis">
      Polynomial Construction and Pairing: Proving \(a_i\) and \(b_i\)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sumcheck" class="md-nav__link">
    <span class="md-ellipsis">
      Sumcheck
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#acknowledgements" class="md-nav__link">
    <span class="md-ellipsis">
      Acknowledgements
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference" class="md-nav__link">
    <span class="md-ellipsis">
      Reference
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    简析 Cached Quotients Lookup Arguments
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    2024 05 16
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            2024 05 16
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2024-05-16/jolt-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Notes about Jolt
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    2024 05 28
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            2024 05 28
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2024-05-28/bit-commitment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How bit commitment works
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    2024 05 29
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            2024 05 29
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2024-05-29/bitvm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BitVM 介绍
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    2024 05 30
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            2024 05 30
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2024-05-30/why-no-zk-in-bitcoin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Why There’s No ZK in Bitcoin: The Missing Pieces
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13" >
        
          
          <label class="md-nav__link" for="__nav_13" id="__nav_13_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    2024 06 01
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13">
            <span class="md-nav__icon md-icon"></span>
            2024 06 01
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2024-06-01/bitvm-script/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BitVM Script
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14" >
        
          
          <label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    2024 06 23
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14">
            <span class="md-nav__icon md-icon"></span>
            2024 06 23
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2024-06-23/commutative-algebra/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    交换代数学习笔记
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_15" >
        
          
          <label class="md-nav__link" for="__nav_15" id="__nav_15_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    2024 09 03
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_15">
            <span class="md-nav__icon md-icon"></span>
            2024 09 03
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2024-09-03/Drawing-root-of-unity-complex-n4.excalidraw/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Drawing root of unity complex n4.excalidraw
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2024-09-03/Drawing-root-of-unity-complex-n8.excalidraw/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Drawing root of unity complex n8.excalidraw
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2024-09-03/Drawing-root-of-unity-group-n16.excalidraw/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Drawing root of unity group n16.excalidraw
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2024-09-03/roots-of-unity/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Roots of Unity: An Introduction
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_16" >
        
          
          <label class="md-nav__link" for="__nav_16" id="__nav_16_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    2024 09 11
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_16">
            <span class="md-nav__icon md-icon"></span>
            2024 09 11
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2024-09-11/field-extensions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Field Extensions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_17" >
        
          
          <label class="md-nav__link" for="__nav_17" id="__nav_17_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    2024 09 23
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_17">
            <span class="md-nav__icon md-icon"></span>
            2024 09 23
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2024-09-23/fft-code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FFT Code
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-problem-lookup-arguments-solve" class="md-nav__link">
    <span class="md-ellipsis">
      The Problem Lookup Arguments Solve
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-contribution-of-cq" class="md-nav__link">
    <span class="md-ellipsis">
      The Contribution of CQ
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logarithmic-derivatives" class="md-nav__link">
    <span class="md-ellipsis">
      Logarithmic Derivatives
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logarithmic-derivative-lookup-protocol" class="md-nav__link">
    <span class="md-ellipsis">
      Logarithmic Derivative Lookup Protocol
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#polynomial-construction-and-pairing-proving-a_i-and-b_i" class="md-nav__link">
    <span class="md-ellipsis">
      Polynomial Construction and Pairing: Proving \(a_i\) and \(b_i\)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sumcheck" class="md-nav__link">
    <span class="md-ellipsis">
      Sumcheck
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#acknowledgements" class="md-nav__link">
    <span class="md-ellipsis">
      Acknowledgements
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference" class="md-nav__link">
    <span class="md-ellipsis">
      Reference
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="an-introduction-to-cached-quotients-lookup-arguments">An Introduction to Cached Quotients Lookup Arguments<a class="headerlink" href="#an-introduction-to-cached-quotients-lookup-arguments" title="Permanent link">&para;</a></h1>
<p>This article is supported by the <a href="https://github.com/privacy-scaling-explorations/acceleration-program">PSE Acceleration Program</a>.</p>
<p>Code: <a href="https://github.com/luckyyang/pylookup/tree/cq_fk/src/cq">pylookup</a></p>
<p>This code is an implementation based on the CQ paper. Please see <code>README.md</code> to learn how to run it.</p>
<p>Additionally, it includes a file <code>cq.ipynb</code>, which is a Python notebook version of the implementation. It's a simplified version of the CQ implementation and is quite similar to this tutorial.</p>
<h2 id="the-problem-lookup-arguments-solve">The Problem Lookup Arguments Solve<a class="headerlink" href="#the-problem-lookup-arguments-solve" title="Permanent link">&para;</a></h2>
<p>In zero-knowledge proof systems, it's common to use arithmetic processes to convert a computational problem into an equivalent mathematical expression (usually a polynomial). This allows the use of mathematical properties to transform, compute, and verify polynomials. This is a key step in constructing zero-knowledge proofs because it enables complex computational processes to be precisely expressed and verified in mathematics.</p>
<p>However, some computations cannot be effectively arithmetized, or their arithmetization may produce more constraints (polynomials). For example, proving a value is within a range (<span class="arithmatex">\(0&lt;x&lt;5\)</span>) might require more than 10 constraints. In such cases, using lookup arguments can reduce the number of constraints and the size of the generated proof.</p>
<p>Lookup arguments allow the prover to demonstrate that a value belongs to a predefined set.</p>
<p>Taking the previous example, to prove <span class="arithmatex">\(0&lt;x&lt;5\)</span>, we only need one lookup constraint: <span class="arithmatex">\(x \in \{1, 2, 3, 4\}\)</span>, that is, proving <span class="arithmatex">\(x\)</span> is in the table <span class="arithmatex">\(\{1, 2, 3, 4\}\)</span>.</p>
<table>
<thead>
<tr>
<th>Table</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
</tr>
<tr>
<td>2</td>
</tr>
<tr>
<td>3</td>
</tr>
<tr>
<td>4</td>
</tr>
</tbody>
</table>
<p>The above example is a single-column table. Further, a table can express any relationship, as long as the corresponding input and output can be found in the table, we can say that the lookup proof is valid.</p>
<table>
<thead>
<tr>
<th>Input 1</th>
<th>Input 2</th>
<th>Input 3</th>
<th>Output</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>2</td>
<td>3</td>
<td>6</td>
</tr>
<tr>
<td>2</td>
<td>3</td>
<td>4</td>
<td>24</td>
</tr>
<tr>
<td>2</td>
<td>3</td>
<td>8</td>
<td>48</td>
</tr>
<tr>
<td>4</td>
<td>8</td>
<td>3</td>
<td>13</td>
</tr>
<tr>
<td>13</td>
<td>6</td>
<td>4</td>
<td>33</td>
</tr>
</tbody>
</table>
<p>For example, the first row of the table can be defined as an addition: <span class="arithmatex">\(1+2+3=6\)</span>. As long as the given lookup is <span class="arithmatex">\(\{1, 2, 3, 6\}\)</span>, it satisfies the lookup constraint; the second row can be defined as multiplication: <span class="arithmatex">\(2 * 3 * 4 = 24\)</span>, and as long as the given lookup is <span class="arithmatex">\(\{2, 3, 4, 24\}\)</span>, it meets the lookup constraint.</p>
<h2 id="the-contribution-of-cq">The Contribution of CQ<a class="headerlink" href="#the-contribution-of-cq" title="Permanent link">&para;</a></h2>
<p>As seen in the comparison from the paper (illustrated below), CQ (Cached Quotients Lookup Arguments) currently has the lowest computational complexity for the prover among lookup arguments, standing at <span class="arithmatex">\(O(n \log n)\)</span>. This is achieved through certain preprocessing steps. Compared to Baloo, CQ offers fewer group operations and a smaller proof size.</p>
<p><img alt="Pasted image 20240116145259.png" src="../Pasted%20image%2020240116145259.png" /></p>
<p>The main difference between CQ and the four lookup arguments mentioned in the above table is that CQ utilizes the technique of logarithmic derivatives. This allows the prover's computations to be based on the original large table, without needing to extract a subtable from the large table, thereby making the prover's computations more efficient.</p>
<p>Below, we explain the core principle of CQ. If you're interested in more details and optimizations, please refer to the original paper.</p>
<h2 id="logarithmic-derivatives">Logarithmic Derivatives<a class="headerlink" href="#logarithmic-derivatives" title="Permanent link">&para;</a></h2>
<p>Lookup arguments is about proving that elements of a vector/table <span class="arithmatex">\(\vec f\)</span> are all contained within <span class="arithmatex">\(\vec t\)</span>. This is consistent with other lookup arguments.</p>
<p>Assume:</p>
<ul>
<li><span class="arithmatex">\(\vec f = \{f_1,  f_2,  f_3,  f_4,  ...,  f_n\}\)</span></li>
<li><span class="arithmatex">\(\vec t = \{t_1,  t_2,  t_3,  t_4, ..,  t_n\}\)</span></li>
</ul>
<p>For example:</p>
<ul>
<li><span class="arithmatex">\(\vec f = \{1,  2,  2,  3,  3,  3\}\)</span></li>
<li><span class="arithmatex">\(\vec t = \{1,  2,  3,  4\}\)</span></li>
</ul>
<p>The above problem can be transformed into a new one: construct a polynomial using these elements, which have the same roots:</p>
<ul>
<li><span class="arithmatex">\(f(x) = (x-1)(x-2)(x-2)(x-3)(x-3)(x-3)\)</span></li>
<li><span class="arithmatex">\(t(x) = (x-1)^1(x-2)^2(x-3)^3(x-4)^0\)</span></li>
</ul>
<p>The advantage here is that we can utilize the mathematical properties of polynomials for subsequent calculations and proofs.</p>
<p>Note that in <span class="arithmatex">\(t(x)\)</span>, the times of each element in <span class="arithmatex">\(\vec f\)</span> needs to be counted as the power of the corresponding root in the polynomial <span class="arithmatex">\(t(x)\)</span>. The times of elements not present is 0. As seen, the times of elements of <span class="arithmatex">\(\vec f\)</span> in <span class="arithmatex">\(\vec t\)</span> is:</p>
<ul>
<li>1 appears 1 time</li>
<li>2 appears 2 times</li>
<li>3 appears 3 times</li>
<li>4 appears 0 time</li>
</ul>
<p>This can be represented by a vector <span class="arithmatex">\(\vec m\)</span>:</p>
<p><span class="arithmatex">\(\vec m = \{1,  2,  3,  0\}\)</span></p>
<p>Hence, <span class="arithmatex">\(t(x)\)</span> is constructed as: <span class="arithmatex">\(t(x) = (x-1)^1(x-2)^2(x-3)^3(x-4)^0\)</span>.</p>
<p>If <span class="arithmatex">\(f(x)\)</span> equals to <span class="arithmatex">\(t(x)\)</span>, it means that the elements of <span class="arithmatex">\(\vec f\)</span> are all in <span class="arithmatex">\(\vec t\)</span>, satisfying the lookup argument proof. </p>
<p>Constructing a multiplicative polynomial has another benefit: the order of elements in <span class="arithmatex">\(\vec f\)</span> and <span class="arithmatex">\(\vec t\)</span> does not need to be considered.</p>
<p>However, in practice, we usually do not directly compare in this way because:
1. <span class="arithmatex">\(\vec f\)</span> is usually a secret value and not public, so a direct comparison is not possible.
2. The size of <span class="arithmatex">\(\vec f\)</span> and <span class="arithmatex">\(\vec t\)</span> is generally large, and the polynomials constructed have high degrees, making them relatively difficult to handle.</p>
<p>Is there a better way to prove <span class="arithmatex">\(f(x) = t(x)\)</span>?</p>
<p>Yes. CQ uses the method of "logarithmic derivatives" mentioned in the paper <a href="https://eprint.iacr.org/2022/1530.pdf">Multivariate lookups based on logarithmic derivatives</a>, transforming the multiplication relationship into an addition relationship, making the proof much more concise.</p>
<p>What is logarithmic derivative?</p>
<p>In mathematics, logarithmic derivative is a technique for finding the derivative of a function/polynomial, especially useful when the function is a product of multiple functions. This method simplifies the derivation process by applying the natural logarithm (<span class="arithmatex">\(ln\)</span>) and the chain rule.</p>
<p>Let's calculate the logarithmic derivative of <span class="arithmatex">\(f(x) = (x-1)(x-2)^2(x-3)^3\)</span>. Following the steps of logarithmic derivative, we first take the logarithm of <span class="arithmatex">\(f(x)\)</span> and then differentiate the resulting expression. Here are the steps:</p>
<p><strong>Taking the logarithm</strong>:</p>
<p><span class="arithmatex">\(\ln(f(x)) = \ln((x-1)(x-2)(x-2)(x-3)(x-3)(x-3))\)</span></p>
<p><strong>Expanding the logarithm</strong> (using logarithmic properties to convert multiplication to addition):</p>
<p><span class="arithmatex">\(\ln(f(x)) = \ln(x-1) + \ln(x-2)+ \ln(x-2)+ \ln(x-3)+ \ln(x-3) + \ln(x-3)\)</span></p>
<p><strong>Differentiating both sides</strong> (applying the chain rule and basic derivative rules):</p>
<p><span class="arithmatex">\(\frac{d}{dx}\ln(f(x)) = \frac{d}{dx}(\ln(x-1) + \ln(x-2)+ \ln(x-2)+ \ln(x-3)+ \ln(x-3) + \ln(x-3))\)</span></p>
<p>Simplifying to:</p>
<p><span class="arithmatex">\(\frac{f'(x)}{f(x)} = \frac{1}{x-1} + \frac{1}{x-2}+ \frac{1}{x-2} + \frac{1}{x-3} + \frac{1}{x-3} + \frac{1}{x-3}\)</span></p>
<p>So:</p>
<p><span class="arithmatex">\(\frac{f'(x)}{f(x)} = \sum_{j \in |\vec f|} \frac{1}{x-f_j}\)</span></p>
<p>Similarly, the logarithmic derivative of <span class="arithmatex">\(t(x)\)</span> is:</p>
<p><span class="arithmatex">\(\frac{t'(x)}{t(x)} = \frac{1}{x-1} + \frac{2}{x-2}+ \frac{3}{x-3}\)</span></p>
<p>So:</p>
<p><span class="arithmatex">\(\frac{t'(x)}{t(x)} = \sum_{i \in |\vec t|} \frac{m_i}{x-t_j}\)</span></p>
<p>Therefore, we need to prove:</p>
<p><span class="arithmatex">\(\frac{f'(x)}{f(x)} = \frac{t'(x)}{t(x)}\)</span></p>
<p>Or:</p>
<p><span class="arithmatex">\(\sum_{j \in |\vec f|} \frac{1}{x-f_j} = \sum_{i \in |\vec t|} \frac{m_i}{x-t_i}\)</span></p>
<p>Simplifying further, define <span class="arithmatex">\(a_i = m_i / (x - t_i)\)</span> and <span class="arithmatex">\(b_j = 1 / (x - f_j)\)</span>,</p>
<p>We need to prove:</p>
<p><span class="arithmatex">\(\sum_i a_i = \sum_j b_j\)</span> </p>
<p>This process transforms the product of multiple functions into a summation form. Ultimately, the lookup proof is converted to proving the equality of logarithmic derivatives (<span class="arithmatex">\(\frac{f'(x)}{f(x)}\)</span> and <span class="arithmatex">\(\frac{t'(x)}{t(x)}\)</span>).</p>
<h2 id="logarithmic-derivative-lookup-protocol">Logarithmic Derivative Lookup Protocol<a class="headerlink" href="#logarithmic-derivative-lookup-protocol" title="Permanent link">&para;</a></h2>
<p>Through the above logarithmic derivatives, we can construct a simple lookup argument:</p>
<ul>
<li>The prover sends <span class="arithmatex">\(\vec f, \vec t, \vec m\)</span> to the verifier.</li>
<li>The verifier sends a random number <span class="arithmatex">\(\beta\)</span> to the prover.</li>
<li>The prover sends multiple values to the verifier: <span class="arithmatex">\(a_i = m_i / (\beta - t_i)\)</span> and <span class="arithmatex">\(b_j = 1 / (\beta - f_j)\)</span>, where the ranges of <span class="arithmatex">\(i\)</span> and <span class="arithmatex">\(j\)</span> are the number of elements in <span class="arithmatex">\(\vec t\)</span> and <span class="arithmatex">\(\vec f\)</span>, respectively, <span class="arithmatex">\(i \in |\vec t|, j \in |\vec f|\)</span>.</li>
<li>The verifier performs three types of checks:<ul>
<li>Check of <span class="arithmatex">\(a_i\)</span> values: <span class="arithmatex">\(a_i \times (\beta - t_i) = m_i\)</span>.</li>
<li>Check of <span class="arithmatex">\(b_i\)</span> values: <span class="arithmatex">\(b_i \times (\beta - f_i) = 1\)</span>.</li>
<li>Sum check: <span class="arithmatex">\(\sum_i a_i = \sum_j b_j\)</span>.</li>
</ul>
</li>
</ul>
<p>For the checks of <span class="arithmatex">\(a_i\)</span> and <span class="arithmatex">\(b_i\)</span>, the above lookup protocol has an issue: the proof size is relatively large because all the <span class="arithmatex">\(a_i\)</span> and <span class="arithmatex">\(b_i\)</span> values need to be sent to the verifier. To resolve this issue, we can use the Schwartz-Zippel lemma, first encode all the <span class="arithmatex">\(a_i\)</span> and <span class="arithmatex">\(b_i\)</span> values into polynomials, then, the verifier only needs to send a random value for verification, which ensures that all the values of <span class="arithmatex">\(a_i\)</span> and <span class="arithmatex">\(b_i\)</span> provided by the prover are correct.</p>
<p>For the sum check, we can directly use the univariate sumcheck.</p>
<p>Next, let's see how to construct the corresponding proofs.</p>
<h2 id="polynomial-construction-and-pairing-proving-a_i-and-b_i">Polynomial Construction and Pairing: Proving <span class="arithmatex">\(a_i\)</span> and <span class="arithmatex">\(b_i\)</span><a class="headerlink" href="#polynomial-construction-and-pairing-proving-a_i-and-b_i" title="Permanent link">&para;</a></h2>
<p>To verify:</p>
<ul>
<li>The correctness of <span class="arithmatex">\(a_i\)</span>: <span class="arithmatex">\(a_i \times (t_i - \beta) = m_i\)</span>.</li>
<li>The correctness of <span class="arithmatex">\(b_i\)</span>: <span class="arithmatex">\(b_i \times (f_i - \beta) = 1\)</span>.</li>
</ul>
<p>We construct polynomials for <span class="arithmatex">\(a_i\)</span> and <span class="arithmatex">\(b_i\)</span> respectively and then use the properties of polynomials for verification.</p>
<p>This requires:</p>
<ul>
<li>Constructing polynomial <span class="arithmatex">\(A(x)\)</span> from <span class="arithmatex">\(a_i\)</span> and verifying its correctness.</li>
<li>Constructing polynomial <span class="arithmatex">\(B(x)\)</span> from <span class="arithmatex">\(b_i\)</span> and verifying its correctness.</li>
</ul>
<p>Polynomials are usually constructed using Lagrange interpolation. This requires constructing a series of <span class="arithmatex">\(\{x_i, y_i\}\)</span> value pairs to interpolate into a polynomial, usually <span class="arithmatex">\(\{x_i\}\)</span> values come from a multiplicative subgroup, the size of the group is the size of <span class="arithmatex">\(\{y_i\}\)</span>, here respectively <span class="arithmatex">\(|\vec t|\)</span> and <span class="arithmatex">\(|\vec f|\)</span>.</p>
<p>How to construct <span class="arithmatex">\(A(x)\)</span>?</p>
<ol>
<li>The verifier sends a random number <span class="arithmatex">\(\beta\)</span>, let <span class="arithmatex">\(x = \beta\)</span>.</li>
<li>Select a multiplicative subgroup <span class="arithmatex">\(H_t = \{\omega_i\}\)</span> of size <span class="arithmatex">\(|\vec t|\)</span>, <span class="arithmatex">\(i \in |\vec t|\)</span>.</li>
<li><span class="arithmatex">\(A(\omega_i) = a_i = m_i / (t_i - \beta)\)</span>. The <span class="arithmatex">\(\{x_i, y_i\}\)</span> value pairs are <span class="arithmatex">\(\{\omega_i, a_i\}\)</span>.</li>
<li>Use Lagrange interpolation to construct the polynomial <span class="arithmatex">\(A(x)\)</span>.</li>
</ol>
<p>How to check if <span class="arithmatex">\(A(x)\)</span> is correctly constructed?</p>
<ol>
<li>Interpolate <span class="arithmatex">\(\vec m\)</span> and <span class="arithmatex">\(\vec t\)</span> on the multiplicative subgroup to get polynomials <span class="arithmatex">\(M(x), T(x)\)</span>.</li>
<li>On the multiplicative subgroup <span class="arithmatex">\(H_t\)</span>, the polynomial satisfies <span class="arithmatex">\(A(x) = M(x)/(T(x) - \beta)\)</span>.</li>
<li>Transform to <span class="arithmatex">\(A(x)(T(x) - \beta) - M(x) = 0\)</span>.</li>
<li>By the polynomial remainder theorem, <span class="arithmatex">\(A(x)(T(x) - \beta) - M(x) = Q_A(x) * Z_A(x)\)</span>. This equation holds for any value of <span class="arithmatex">\(x\)</span> on the entire group. <span class="arithmatex">\(Q_A(x)\)</span> is the quotient polynomial, <span class="arithmatex">\(Z_A(x) = \prod_i(x - \omega_i)\)</span> is the vanishing polynomial.</li>
<li>The prover sends:<ol>
<li>The commitment of <span class="arithmatex">\(A(x)\)</span>: <span class="arithmatex">\([A(x)]_1\)</span>.</li>
<li>The commitment of <span class="arithmatex">\(Q_A(x)\)</span>: <span class="arithmatex">\([Q_A(x)]_1\)</span>.</li>
<li>The commitment of <span class="arithmatex">\(M(x)\)</span>: <span class="arithmatex">\([M(x)]_1\)</span>.</li>
</ol>
</li>
<li>The verifier independently computes the commitments of <span class="arithmatex">\(T(x)\)</span> <span class="arithmatex">\([T(x)]_2\)</span> and <span class="arithmatex">\(Z_A(x)\)</span> <span class="arithmatex">\([Z_A(x)]_2\)</span>, then verifies using elliptic curve pairing for KZG verification: <span class="arithmatex">\(e([T(x)]_2, [A(x)]_1) = e([1]_2, [A(x)]_1 * \beta + [M(x)]_1) * e([Z_A(x)]_2, [Q_A(x)]_1)\)</span>.</li>
</ol>
<p>Note: Different from the paper, for ease of explanation, some places in this article use a <span class="arithmatex">\(-\)</span> sign instead of a <span class="arithmatex">\(+\)</span> sign. This is because subtraction operations on the group are transformed into addition operations, e.g., for a group with <span class="arithmatex">\(modulus = 5\)</span>, <span class="arithmatex">\(\beta=-2\%5 = 3\)</span>, so <span class="arithmatex">\((x - 2)\%5 = x + 3\)</span>. We can always transform subtraction into addition representation, so the symbols are not distinguished in certain scenarios.</p>
<p>Construct <span class="arithmatex">\(B(x)\)</span> in the same way:</p>
<ol>
<li>The verifier sends a random number <span class="arithmatex">\(\beta\)</span>, let <span class="arithmatex">\(x = \beta\)</span>.</li>
<li>Select a multiplicative subgroup <span class="arithmatex">\(H_f = \{\omega_j\}\)</span> of size <span class="arithmatex">\(|\vec f|\)</span>, <span class="arithmatex">\(j \in |\vec f|\)</span>.</li>
<li><span class="arithmatex">\(B(\omega_j) = b_j = 1 / (f_j - \beta)\)</span>. The <span class="arithmatex">\(\{x_j, y_j\}\)</span> value pairs are <span class="arithmatex">\(\{\omega_j, b_j\}\)</span>.</li>
<li>Use Lagrange interpolation to construct the polynomial <span class="arithmatex">\(B(x)\)</span>.</li>
</ol>
<p>Check if <span class="arithmatex">\(B(x)\)</span> is correctly constructed:</p>
<ol>
<li>Interpolate <span class="arithmatex">\(\vec f\)</span> on the multiplicative subgroup to get polynomial <span class="arithmatex">\(F(x)\)</span>.</li>
<li>On the multiplicative subgroup <span class="arithmatex">\(H_f\)</span>, the polynomial satisfies <span class="arithmatex">\(B(x) = 1/(F(x) - \beta)\)</span>.</li>
<li>Transform to <span class="arithmatex">\(B(x)(F(x) - \beta) - 1 = 0\)</span>.</li>
<li>By the polynomial remainder theorem, <span class="arithmatex">\(B(x)(F(x) - \beta) - 1 = Q_B(x) * Z_B(x)\)</span>. This equation holds for any value of <span class="arithmatex">\(x\)</span> on the entire group. <span class="arithmatex">\(Q_B(x)\)</span> is the quotient polynomial, <span class="arithmatex">\(Z_B(x) = \prod_j(x - \omega_j)\)</span> is the vanishing polynomial.</li>
<li>The prover sends:<ol>
<li>The commitment of <span class="arithmatex">\(B(x)\)</span>: <span class="arithmatex">\([B(x)]_1\)</span>.</li>
<li>The commitment of <span class="arithmatex">\(Q_B(x)\)</span>: <span class="arithmatex">\([Q_B(x)]_1\)</span>.</li>
<li>The commitment of <span class="arithmatex">\(F(x)\)</span>: <span class="arithmatex">\([F(x)]_1\)</span>.</li>
</ol>
</li>
<li>The verifier independently computes the commitment of <span class="arithmatex">\(Z_B(x)\)</span> <span class="arithmatex">\([Z_B(x)]_2\)</span>, then verifies using elliptic curve pairing: <span class="arithmatex">\(e([F(x)]_2, [B(x)]_1) = e([1]_2, [B(x)]_1 * \beta + [1]_1) * e([Z_B(x)]_2, [Q_B(x)]_1)\)</span>.</li>
</ol>
<p>Note: The verification process in the paper has been optimized. For ease of explanation, we do not use the same verification method as in the paper, but the core principle is the same, which is KZG verification through pairing.</p>
<p><span class="arithmatex">\(B(x)\)</span> also needs further check to verify the polynomial's degree is correct, specifically by:</p>
<ul>
<li>Let <span class="arithmatex">\(N = |\vec t|, n = |\vec f|\)</span></li>
<li>The prover sends<ul>
<li>The commitment of <span class="arithmatex">\(B(x)\)</span>, <span class="arithmatex">\(b = [B(x)]_1\)</span></li>
<li>The commitment of <span class="arithmatex">\(X^{N−1−(n−1)}\)</span>, <span class="arithmatex">\(r = [X^{N−1−(n−1)}]_2\)</span></li>
<li>The commitment of <span class="arithmatex">\(P(x)\)</span>, <span class="arithmatex">\(p = [P(x)]_2\)</span>, where <span class="arithmatex">\(P(X) := B(X) * X^{N−1−(n−1)}\)</span></li>
</ul>
</li>
<li>The verifier checks: <span class="arithmatex">\(e(b, r) = e(p, [1]_2)\)</span></li>
</ul>
<p>The paper here makes a certain optimization, using <span class="arithmatex">\(B_0(x)\)</span> instead of <span class="arithmatex">\(B(x)\)</span>, but the goal is the same: to check the degree of the polynomial.</p>
<h2 id="sumcheck">Sumcheck<a class="headerlink" href="#sumcheck" title="Permanent link">&para;</a></h2>
<p>Next, we need to verify that the sum holds: <span class="arithmatex">\(\sum_i a_i = \sum_j b_j\)</span>.</p>
<p>After proving that each item on both sides is correct, we now need to prove that the sum of both sides is correct, i.e., they are equal to each other. The method to prove is univariate sumcheck. This can be demonstrated using the following lemma originally used in the Aurora construction (<span class="arithmatex">\([BCR+19]\)</span>, Remark 5.6):</p>
<div class="arithmatex">\[
\sum_{a \in H} f(a) = t \cdot f(0)
\]</div>
<p>Where:</p>
<ul>
<li><span class="arithmatex">\(H\)</span> is a multiplicative subgroup: <span class="arithmatex">\(H=\{1, \omega, \omega^2, ..., \omega^{t-2}, \omega^{t-1} \}\)</span>, <span class="arithmatex">\(t\)</span> is the number of elements in <span class="arithmatex">\(H\)</span>, <span class="arithmatex">\(t=|H|\)</span>, <span class="arithmatex">\(\omega\)</span> is a primitive root.</li>
<li><span class="arithmatex">\(f(x)\)</span> is a polynomial, <span class="arithmatex">\(f(x) = f_0 + f_1x + f_2x^2 + ... + f_{t-2}x^{t-2} + f_{t-1}x^{t-1}\)</span>.</li>
</ul>
<p>Let's decompose the calculation process, substitute the values of <span class="arithmatex">\(a\)</span> from <span class="arithmatex">\(H\)</span> into <span class="arithmatex">\(f(x)\)</span>:</p>
<div class="arithmatex">\[
\begin{align*}
&amp; \sum_{a \in H} f(a) = f(1) + f(\omega) + f(\omega^2) + ... + + f(\omega^{t-1}) \\
&amp; \\
&amp; \\
&amp; = f_0 + f_1 + f_2 + ... + f_{t-2} + f_{t-1} \\
&amp; + f_0 + f_1\omega + f_2\omega^2 + ... + f_{t-2}\omega^{t-2} + f_{t-1}\omega^{t-1} \\
&amp; + f_0 + f_1(\omega^2) + f_2(\omega^2)^2 + ... + f_{t-2}(\omega^2)^{t-2} + f_{t-1}(\omega^2)^{t-1} \\
&amp; . \\
&amp; . \\
&amp; . \\
&amp; + f_0 + f_1(\omega^{t-2}) + f_2(\omega^{t-2})^2 + ... + f_{t-2}(\omega^{t-2})^{t-2} + f_{t-1}(\omega^{t-2})^{t-1} \\
&amp; + f_0 + f_1(\omega^{t-1}) + f_2(\omega^{t-1})^2 + ... + f_{t-2}(\omega^{t-1})^{t-2} + f_{t-1}(\omega^{t-1})^{t-1} \\
&amp; \\
&amp; \\
&amp; = t \cdot f_0 + f_1\sum_{i \in t}(\omega)^i + f_2\sum_{i \in t}(\omega^2)^i + ... + f_{t-2}\sum_{i \in t}(\omega^{t-2})^i + f_{t-1}\sum_{i \in t}(\omega^{t-1})^i \\
\end{align*}
\]</div>
<p>In the above formula, except for the first term, the sum of each of the last <span class="arithmatex">\(t-1\)</span> terms is 0. This is because each <span class="arithmatex">\(\omega^i\)</span> is an element of the multiplicative subgroup in the finite field, and each element can be the generator of the multiplicative subgroup, which means that the sum of each of the last <span class="arithmatex">\(t-1\)</span> terms is the sum of all elements in the multiplicative subgroup.</p>
<p>The multiplicative subgroup in the finite field is structurally similar to the unit circle in the complex field. On the unit circle:</p>
<ul>
<li>All elements are generated by the generator and are evenly distributed on the unit circle.</li>
<li>Each element has another symmetric point based on the origin, the vectors of these two points in the complex plane cancel each other out, and their sum is 0.</li>
</ul>
<p>Therefore, the sum of all elements of the unit circle is 0.</p>
<p>Since we need to do the interpolation with FFT(Fast Fourier Transform) algorithm, so the number of elements in the multiplicative subgroup need to be powers of 2. In the multiplicative subgroup, each element also has a symmetric point. For a multiplicative subgroup <span class="arithmatex">\(H\)</span> with <span class="arithmatex">\(t\)</span> elements: <span class="arithmatex">\(H_i + H_{i+t/2} = 0\)</span>, these two symmetric points add up to 0, so the sum of all elements in the multiplicative subgroup is also 0. This is why the sum of each of the last <span class="arithmatex">\(t-1\)</span> terms is 0:</p>
<p>$$
\begin{align*}
&amp; \sum_{i \in t}(\omega)^i = 0\
&amp; \sum_{i \in t}(\omega<sup>2)</sup>i = 0 \
&amp; . \</p>
<p>&amp; . \
&amp; . \
&amp; \sum_{i \in t}(\omega<sup>{t-2})</sup>i = 0 \
&amp; \sum_{i \in t}(\omega<sup>{t-1})</sup>i = 0 \
\end{align*}
$$</p>
<p>So:</p>
<div class="arithmatex">\[
\begin{align*}
&amp; \sum_{a \in H} f(a) \\
&amp; = t \cdot f_0 + f_1\sum_{i \in t}(\omega)^i + f_2\sum_{i \in t}(\omega^2)^i + ... + f_{t-2}\sum_{i \in t}(\omega^{t-2})^i + f_{t-1}\sum_{i \in t}(\omega^{t-1})^i \\
&amp; = t \cdot f_0 + f_1 \cdot 0 + f_2 \cdot 0 + ... + f_{t-2} \cdot 0 + f_{t-1} \cdot 0 \\
&amp; = t \cdot f_0
\end{align*}
\]</div>
<p>Thus:</p>
<p><span class="arithmatex">\(\sum_{x \in H_t} A(x) = |\vec t| \cdot A(0)\)</span></p>
<p><span class="arithmatex">\(\sum_{x \in H_f} B(x) = |\vec f| \cdot B(0)\)</span></p>
<p>We only need to verify if the following relation holds: </p>
<p><span class="arithmatex">\(|\vec t| \cdot A(0) \stackrel{?}{=} |\vec f| \cdot B(0)\)</span></p>
<p>Finally, with these three proofs(<span class="arithmatex">\(A(x), B(x), Sumcheck\)</span>), we complete the CQ lookup arguments.</p>
<h2 id="acknowledgements">Acknowledgements<a class="headerlink" href="#acknowledgements" title="Permanent link">&para;</a></h2>
<ul>
<li>Guo Yu</li>
<li>Yu-Ming Hsu</li>
<li>Jing-Jie Wang</li>
<li>Paul Yu</li>
<li>Even</li>
<li>Xiaoxiong</li>
</ul>
<h2 id="reference">Reference<a class="headerlink" href="#reference" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://eprint.iacr.org/2022/1763">cq: Cached quotients for fast lookups</a></li>
<li><a href="https://www.youtube.com/@thebiuresearchcenteronappl8783">A Close Look at a Lookup Argument - Mary Maller</a></li>
<li><a href="https://github.com/sec-bit/learning-zkp/blob/develop/plonk-intro-cn/7-plonk-lookup.md">理解 PLONK（七）：Lookup Gate</a></li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.56dfad97.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
      
    
  </body>
</html>